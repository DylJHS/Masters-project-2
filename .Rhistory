library(tidyverse)
library(xgboost)
library(caret)
library(caTools)
knitr::opts_knit$set(root.dir = "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
depth <- 5
min_child <- 1
lr <- 0.03
nrounds <- 1000
target <- "3p"
rna_data_path <- "Data/RNA_Data/Model_Input/Train/train_"
log_scld_tpm <- read.csv(
paste0(
rna_data_path,
"log_scld_tpm_soi.csv"
),
row.names = 1
)
# Arm Level Aneuploidies
# Load the data
chr_cnv <- read_tsv(
"Data/CIN_Features/CNV_Data/PANCAN_ArmCallsAndAneuploidyScore_092817.txt"
)%>%
replace(is.na(.), 0) %>%
select(-"Aneuploidy Score", -"Type") %>%
mutate(Sample = str_replace_all(Sample, "-", "\\.")) %>%
column_to_rownames("Sample") %>%
mutate_all(~ replace(., . == 1, 2)) %>%
mutate_all(~ replace(., . == 0, 1)) %>%
mutate_all(~ replace(., . == -1, 0))
# Calc the class weights
freq <- chr_cnv %>%
as.data.frame() %>%
gather(key = "arm", value = "freq") %>%
group_by(arm) %>%
count(freq)%>%
as.data.frame() %>%
spread(key = freq, value = n) %>%
replace(is.na(.), 0)
arm_weights <- freq %>%
mutate(total = rowSums(select(., -arm))) %>%
mutate_at(vars(-arm, -total), list(~1- round(. / total,2))) %>%
mutate(total = rowSums(select(., -arm,-total))) %>%
mutate_at(vars(-arm, -total), list(~ round(./total, 2))) %>%
select(-total) %>%
t() %>%
as.data.frame() %>%
setNames(make.unique(unlist(.[1, ]))) %>%   # Convert first row to column names
.[-1, ]
target_weights <- arm_weights[[target]]
# target_weights <- c(0.5, 0.5, 0.5)
#save the weights to a file
write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
View(arm_weights)
# Rename the rowns
arm_weights <- arm_weights %>%
rownames_to_column("Arm") %>%
rename_all(~ paste0("Weight_", .))
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
rna_data_path <- "Data/RNA_Data/Model_Input/Train/train_"
log_scld_tpm <- read.csv(
paste0(
rna_data_path,
"log_scld_tpm_soi.csv"
),
row.names = 1
)
# Arm Level Aneuploidies
# Load the data
chr_cnv <- read_tsv(
"Data/CIN_Features/CNV_Data/PANCAN_ArmCallsAndAneuploidyScore_092817.txt"
)%>%
replace(is.na(.), 0) %>%
select(-"Aneuploidy Score", -"Type") %>%
mutate(Sample = str_replace_all(Sample, "-", "\\.")) %>%
column_to_rownames("Sample") %>%
mutate_all(~ replace(., . == 1, 2)) %>%
mutate_all(~ replace(., . == 0, 1)) %>%
mutate_all(~ replace(., . == -1, 0))
# Calc the class weights
freq <- chr_cnv %>%
as.data.frame() %>%
gather(key = "arm", value = "freq") %>%
group_by(arm) %>%
count(freq)%>%
as.data.frame() %>%
spread(key = freq, value = n) %>%
replace(is.na(.), 0)
arm_weights <- freq %>%
mutate(total = rowSums(select(., -arm))) %>%
mutate_at(vars(-arm, -total), list(~1- round(. / total,2))) %>%
mutate(total = rowSums(select(., -arm,-total))) %>%
mutate_at(vars(-arm, -total), list(~ round(./total, 2))) %>%
select(-total) %>%
t() %>%
as.data.frame() %>%
setNames(make.unique(unlist(.[1, ]))) %>%   # Convert first row to column names
.[-1, ]
target_weights <- arm_weights[[target]]
# target_weights <- c(0.5, 0.5, 0.5)
# Rename the rowns
n_arm_weights <- arm_weights %>%
mutate(arm = as.integer(rownames(.))-1)
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
View(n_arm_weights)
# Rename the rowns
n_arm_weights <- arm_weights %>%
mutate(arm = as.integer(rownames(.))-1) %>%
column_to_rownames("arm") %>%
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
# Rename the rowns
n_arm_weights <- arm_weights %>%
mutate(arm = as.integer(rownames(.))-1) %>%
column_to_rownames("arm")
rna_data_path <- "Data/RNA_Data/Model_Input/Train/train_"
log_scld_tpm <- read.csv(
paste0(
rna_data_path,
"log_scld_tpm_soi.csv"
),
row.names = 1
)
# Arm Level Aneuploidies
# Load the data
chr_cnv <- read_tsv(
"Data/CIN_Features/CNV_Data/PANCAN_ArmCallsAndAneuploidyScore_092817.txt"
)%>%
replace(is.na(.), 0) %>%
select(-"Aneuploidy Score", -"Type") %>%
mutate(Sample = str_replace_all(Sample, "-", "\\.")) %>%
column_to_rownames("Sample") %>%
mutate_all(~ replace(., . == 1, 2)) %>%
mutate_all(~ replace(., . == 0, 1)) %>%
mutate_all(~ replace(., . == -1, 0))
# Calc the class weights
freq <- chr_cnv %>%
as.data.frame() %>%
gather(key = "arm", value = "freq") %>%
group_by(arm) %>%
count(freq)%>%
as.data.frame() %>%
spread(key = freq, value = n) %>%
replace(is.na(.), 0)
arm_weights <- freq %>%
mutate(total = rowSums(select(., -arm))) %>%
mutate_at(vars(-arm, -total), list(~1- round(. / total,2))) %>%
mutate(total = rowSums(select(., -arm,-total))) %>%
mutate_at(vars(-arm, -total), list(~ round(./total, 2))) %>%
select(-total) %>%
t() %>%
as.data.frame() %>%
setNames(make.unique(unlist(.[1, ]))) %>%   # Convert first row to column names
.[-1, ]
target_weights <- arm_weights[[target]]
# target_weights <- c(0.5, 0.5, 0.5)
# Rename the rowns
n_arm_weights <- arm_weights %>%
mutate(arm = as.integer(rownames(.))-1) %>%
column_to_rownames("arm")
# Rename the rowns
n_arm_weights <- arm_weights %>%
rownames_to_column()
# mutate(arm = as.integer(rownames(.))-1) %>%
# column_to_rownames("arm")
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
# Rename the rowns
n_arm_weights <- arm_weights %>%
rownames_to_column("arm") %>%
mutate(arm = as.integer(arm)-1) %>%
column_to_rownames("arm")
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
# Rename the rowns
n_arm_weights <- arm_weights %>%
rownames_to_column("arm") %>%
mutate(arm = as.integer(arm)-1) %>%
column_to_rownames("arm") %>%
t()
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
# Rename the rowns
n_arm_weights <- arm_weights %>%
rownames_to_column("arm") %>%
mutate(arm = as.integer(arm)-1) %>%
column_to_rownames("arm") %>%
t() %>%
as.data.frame()
#save the weights to a file
# write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = FALSE)
# Rename the rowns
n_arm_weights <- arm_weights %>%
rownames_to_column("arm") %>%
mutate(arm = as.integer(arm)-1) %>%
column_to_rownames("arm") %>%
t() %>%
as.data.frame()
#save the weights to a file
write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = TRUE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
# Rename the rowns
n_arm_weights <- arm_weights[, arm_order] %>%
rownames_to_column("arm") %>%
mutate(arm = as.integer(arm)-1) %>%
column_to_rownames("arm") %>%
t() %>%
as.data.frame()
#save the weights to a file
write.csv(arm_weights, "Data/CIN_Features/CNV_Data/arm_weights.csv", row.names = TRUE)
knitr::opts_knit$set(root.dir ="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
full_df <- rbind(full_df, current_file)
}
# drop the duplicates
full_df <- full_df %>%
distinct()
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_"))
weight_loss_freq <- as.data.frame(table(best_loss$Weight_loss)) %>%
rename(Weight_loss = Var1)
weight_gain_freq <- as.data.frame(table(best_loss$Weight_gain)) %>%
rename(Weight_gain = Var1)
weight_norm_freq <- as.data.frame(table(best_loss$Weight_norm)) %>%
rename(Weight_norm = Var1)
combo_freq <- as.data.frame(table(best_loss$combo)) %>%
rename(combo = Var1)
rna_freq <- as.data.frame(table(best_loss$RNA_Set)) %>%
rename(RNA_Set = Var1) %>%
merge(.,
best_loss %>%
group_by(RNA_Set) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "RNA_Set")
depth_freq <- as.data.frame(table(best_loss$Depth)) %>%
rename(Depth = Var1) %>%
merge(.,
best_loss %>%
group_by(Depth) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "Depth")
# write.csv(full_df, "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/")
View(rna_freq)
View(best_loss)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature)
# Save the best to a csv
write.csv(best_loss, "/Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "/Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "/Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
View(full_df)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
full_df <- rbind(full_df, current_file)
}
# drop the duplicates
full_df <- full_df %>%
distinct()
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
weight_loss_freq <- as.data.frame(table(best_loss$Weight_loss)) %>%
rename(Weight_loss = Var1)
weight_gain_freq <- as.data.frame(table(best_loss$Weight_gain)) %>%
rename(Weight_gain = Var1)
weight_norm_freq <- as.data.frame(table(best_loss$Weight_norm)) %>%
rename(Weight_norm = Var1)
combo_freq <- as.data.frame(table(best_loss$combo)) %>%
rename(combo = Var1)
rna_freq <- as.data.frame(table(best_loss$RNA_Set)) %>%
rename(RNA_Set = Var1) %>%
merge(.,
best_loss %>%
group_by(RNA_Set) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "RNA_Set")
depth_freq <- as.data.frame(table(best_loss$Depth)) %>%
rename(Depth = Var1) %>%
merge(.,
best_loss %>%
group_by(Depth) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "Depth")
# write.csv(full_df, "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/")
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
full_df <- rbind(full_df, current_file)
}
# drop the duplicates
full_df <- full_df %>%
distinct()
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
weight_loss_freq <- as.data.frame(table(best_loss$Weight_loss)) %>%
rename(Weight_loss = Var1)
weight_gain_freq <- as.data.frame(table(best_loss$Weight_gain)) %>%
rename(Weight_gain = Var1)
weight_norm_freq <- as.data.frame(table(best_loss$Weight_norm)) %>%
rename(Weight_norm = Var1)
combo_freq <- as.data.frame(table(best_loss$combo)) %>%
rename(combo = Var1)
rna_freq <- as.data.frame(table(best_loss$RNA_Set)) %>%
rename(RNA_Set = Var1) %>%
merge(.,
best_loss %>%
group_by(RNA_Set) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "RNA_Set")
depth_freq <- as.data.frame(table(best_loss$Depth)) %>%
rename(Depth = Var1) %>%
merge(.,
best_loss %>%
group_by(Depth) %>%
summarise(Test_mlogloss = mean(Test_mlogloss)),
by = "Depth")
# write.csv(full_df, "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/")
View(full_df)
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
full_df <- rbind(full_df, current_file)
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
write.csv(best_loss, "Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
params <- read.csv("Data/CIN_Features/XGB_parameters.csv")
View(params)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
full_df <- rbind(full_df, current_file)
}
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if (current_file["Seed"]) {
full_df <- rbind(full_df, current_file)
} else {
current_file$Seed <- NA
full_df <- rbind(full_df, current_file)
}
}
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if (current_file["Seed"]) {
full_df <- rbind(full_df, current_file)
} else {
current_file %>% mutate(current_file, Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if (current_file["Seed"]) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(current_file, Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if (current_file["Seed"]) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
# Save the best to a csv
# write.csv(best_loss, "Data/Model_output/categorical/best_loss.csv", row.names = FALSE)
