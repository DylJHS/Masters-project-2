library(dplyr)
library(knitr)
library(dplyr)
library(ggplot2)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/regression/data"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Learning_Rate" %in% colnames(current_file)) {
current_file <- current_file %>% rename("Eta" = Learning_Rate)}
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
View(full_df)
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/Hyperparams/Base_models/regression/data"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Learning_Rate" %in% colnames(current_file)) {
current_file <- current_file %>% rename("Eta" = Learning_Rate)}
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
feature_order <- c("peri_1", "peri_2", "peri_3", "peri_4", "peri_5", "peri_7", "peri_8", "peri_9", "peri_10", "peri_16_1", "peri_16_2", "peri_17", "peri_20", "peri_22_3", "ai1", "loh_hrd", "lst1")
best_loss <- full_df %>%
mutate(Feature = factor(Feature, levels = feature_order)) %>%
group_by(Feature) %>%
slice_min(Test_RMSE, n = 1, with_ties = FALSE) %>%
ungroup() %>%
arrange(Feature) %>%
as.data.frame() %>%
select(Feature, everything())
#
# # Save the best to a csv
write.csv(best_loss, "Data/Model_output/regression/best_loss.csv", row.names = FALSE)
feature_order <- c("peri_1", "peri_2", "peri_3", "peri_4", "peri_5", "peri_7", "peri_8", "peri_9", "peri_10", "peri_16_1", "peri_16_2", "peri_17", "peri_20", "peri_22_3", "ai1", "loh_hrd", "lst1")
best_loss <- full_df %>%
mutate(Feature = factor(Feature, levels = feature_order)) %>%
group_by(Feature) %>%
slice_min(Test_RMSE, n = 1, with_ties = FALSE) %>%
ungroup() %>%
arrange(Feature) %>%
as.data.frame() %>%
select(Feature, everything())
#
# # Save the best to a csv
write.csv(best_loss, "Data/Model_output/Hyperparams/Base_models/regression/best_loss.csv", row.names = FALSE)
library(dplyr)
library(knitr)
library(dplyr)
library(ggplot2)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/Hyperparams/Base_models/regression/data"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Learning_Rate" %in% colnames(current_file)) {
current_file <- current_file %>% rename("Eta" = Learning_Rate)}
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
feature_order <- c("peri_1", "peri_2", "peri_3", "peri_4", "peri_5", "peri_7", "peri_8", "peri_9", "peri_10", "peri_16_1", "peri_16_2", "peri_17", "peri_20", "peri_22_3", "ai1", "loh_hrd", "lst1")
best_loss <- full_df %>%
mutate(Feature = factor(Feature, levels = feature_order)) %>%
group_by(Feature) %>%
slice_min(Test_RMSE, n = 1, with_ties = FALSE) %>%
ungroup() %>%
arrange(Feature) %>%
as.data.frame() %>%
select(Feature, everything())
#
# # Save the best to a csv
write.csv(best_loss, "Data/Model_output/Hyperparams/Base_models/regression/best_loss.csv", row.names = FALSE)
final_best_loss <- best_loss %>%
select(RNA_Set ,Feature, Trees, Eta, Gamma, Max_depth, Child_weight) %>%
write.csv("Data/Model_input/Hyperparameters/base_reg_hyperparams.csv", row.names = FALSE)
View(best_loss)
final_best_loss <- best_loss %>%
select(RNA_Set ,Feature, Trees, Eta, Gamma, Depth, Child_weight) %>%
write.csv("Data/Model_input/Hyperparameters/base_reg_hyperparams.csv", row.names = FALSE)
library(dplyr)
library(knitr)
library(dplyr)
library(ggplot2)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
library(dplyr)
library(knitr)
library(dplyr)
library(ggplot2)
knitr::opts_knit$set(root.dir="/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project")
folder <- "/Users/Dyll/Documents/Education/VU_UVA/Internship/Epigenetics/Janssen_Group-UMCUtrecht/Main_Project/Data/Model_output/Hyperparams/Base_models/categorical/mlogloss_measures"
full_df <- data.frame()
for (file in list.files(folder, pattern = "*.csv")){
current_file <- read.csv(paste0(folder, "/", file))
if ("Learning_Rate" %in% colnames(current_file)) {
current_file <- current_file %>% rename("Eta" = Learning_Rate)}
if ("Seed" %in% colnames(current_file)) {
full_df <- rbind(full_df, current_file)
} else {
current_file <- current_file %>% mutate(., Seed = NA)
full_df <- rbind(full_df, current_file)
}
}
# drop the duplicates
full_df <- full_df %>%
distinct()
# Save the full_df to a csv
# write.csv(full_df, "Data/Model_output/categorical/mlogloss_measures/Full_categorical_loss_metrics_df.csv", row.names = FALSE)
View(full_df)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
filter(!is.na(Seed)) %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1, with_ties = FALSE) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame()
#
# # Save the best to a csv
write.csv(best_loss, "Data/Model_output/Hyperparams/Base_models/categorical/best_loss.csv", row.names = FALSE)
arm_order <- c("1p", "1q", "2p", "2q", "3p", "3q", "4p", "4q", "5p", "5q", "6p", "6q", "7p", "7q", "8p", "8q", "9p", "9q", "10p", "10q", "11p", "11q", "12p", "12q", "13 (13q)", "14 (14q)", "15 (15q)", "16p", "16q", "17p", "17q", "18p", "18q", "19p", "19q", "20p", "20q", "21 (21q)", "22 (22q)")
best_loss <- full_df %>%
filter(!is.na(Seed)) %>%
group_by(Feature) %>%
slice_min(Test_mlogloss, n = 1, with_ties = FALSE) %>%
ungroup() %>%
mutate(combo = paste(Weight_loss, Weight_norm, Weight_gain, sep = "_")) %>%
mutate(Feature = factor(Feature, levels = arm_order)) %>%
arrange(Feature) %>%
as.data.frame() %>%
rename(., Max_depth = Depth) %>%
select(Feature, RNA_Set, Trees, Max_depth, Child_weight, Eta, Gamma, Weight_loss, Weight_norm , Weight_gain, Trained_mlogloss, Test_mlogloss, Seed)
#
# # Save the best to a csv
write.csv(best_loss, "Data/Model_output/Hyperparams/Base_models/categorical/best_loss.csv", row.names = FALSE)
View(best_loss)
